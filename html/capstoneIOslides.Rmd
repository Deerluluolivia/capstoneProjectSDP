---
title: 'Meta Matters: Leveraging Metadata to Improve Data Use and Effectiveness'
author: "Deffendall, L., Han, L., Buchanan, W. R."
company: "Fayette County Public Schools, Syracuse Public Schools, Mississippi Department of Education"
github: "https://github.com/wbuchanan/elkStackInstaller"
date: "August 6, 2015"
---

```{r, echo = FALSE, eval = TRUE, cache = TRUE, tidy = TRUE, results = "hide", label = "dataload"}

# render("capstoneIOslides.Rmd", ioslides_presentation(transition = "slower", fig_caption = TRUE, fig_height = 5.75, fig_width = 9, widescreen = TRUE, css = "default.css", clean = TRUE))

# Load the data object with the Mplus output
sdpModels <- readRDS("~/Desktop/sdpmplus/output/final/allModels.Rds")

options(DT.options = list(autoWidth = TRUE, pageLength = 4))

library(magrittr)
library(d3heatmap)

# Model Summaries for Models w/Covariates
modCovariates <- plyr::ldply(as.list(seq(1, 32, by = 2)), .fun = function(x) {
					dplyr::as_data_frame(sdpModels[[x]][[4]]) %>%
					dplyr::select(Title, Parameters, LL, AIC, BIC, aBIC, Entropy) %>%
					dplyr::arrange(Title)
}) 

# Model Summaries for Models w/o Covariates
modNoCovariates <- plyr::ldply(as.list(seq(2, 32, by = 2)), .fun = function(x) {
					dplyr::as_data_frame(sdpModels[[x]][[4]]) %>%
					dplyr::select(Title, Parameters, LL, AIC, BIC, aBIC, Entropy) %>%
					dplyr::arrange(Title)
}) 

# Model Summaries for all Models
allMods <- dplyr::bind_rows(modNoCovariates, modCovariates)

logLogs <- order(allMods$LL); logLogs <- logLogs[-1]

dtPalettes <- colorRampPalette(RColorBrewer::brewer.pal(11, "PuOr"),
	     					space = "Lab")
logPalette <- dtPalettes(length(logLogs))

# Create a table to show the structural model parameter estimates
modelParams <- dplyr::bind_rows(sdpModels[[31]][[5]])[c(326:365), ] %>% dplyr::as_data_frame()
modelParams <- modelParams[, c(1, 2, 3, 4, 6, 8)]
names(modelParams) <- c("Outcome", "Inputs", "B", "S.E.", "p", "Level")
rm(sdpModels)

repoNames <- c("ASG Class\n Report", "Admin\n Reports", "Class By\n RIT", 
			   "Class\n Report", "Class By\n Goal", "Class By\n Projected\n Proficiency", 
			   "District\n Summary", "Grade\n Reports", "MPG\n Reports", 
			   "Projected\n Proficiency\n Summary", 
			   "Student\n Goal\n Setting\n Worksheet", 
			   "Student\n Growth\n Summary", "Student\n Progress\n Report")

funcs <- c("Unknown", "Accounting/Clerical/Ops", "Information Tech/Systems", 
		   "District Administration/Central Office", "School Administration", 
		   "Special Ed/Ed Specialists", "ES Educator", "HS Educator", "MS Educator")

ugrps <- c("Between User Group 1", "Between User Group 2", "Between User Group 3",
		   "Between User Group 4", "Between User Group 5")
ses <- c("Within User Group 1", "Within User Group 2", "Within User Group 3",
		   "Within User Group 4", "Within User Group 5")

dataViz <- haven::read_dta("~/Desktop/sdpmplus/visualizations/dataVizData.dta") %>% 
			  dplyr::select(schid, ugroups, session, repo1, repo2, repo3, repo4, 
			  			  repo5, repo6, repo7, repo8, repo9, repo10, repo11, 
			  			  repo12, repo13, func1, func2, func3, func4, func5, 
			  			  func6, eseduc, hseduc, mseduc, elapses, elapsem, 
			  			  elapseh, totdays, ovtotal, daytotal, month, weekday, 
			  			  hour, userid, mlcjoint, report_type_description, 
			  			  reqtime, reportclass, reportcat, jobtitle, jobfunction, 
			  			  date, month, weekday, hour, julday, time, report, 
			  			  repocl2,repocl3, repocl4, repocl5, repocl6, repocl7, 
			  			  repocl8, repocl9, repocl10, repocl11, repocl12, 
			  			  repocl13, repocl14, betweenid, withinid, schnm) 

ugrps2 <- c("Between Class 1", "Between Class 2", "Between Class 3",
		   "Between Class 4", "Between Class 5")
ach <- c("Reading Ach.", "Math Ach.", "Science Ach.", "History Ach.", "Writing Ach.",
		 "Language Ach.", "Overall Ach.", "Reading Gap", "Math Gap", "Science Gap", 
		 "History Gap", "Writing Gap", "Language Gap", "Overall Gap")
oth <- c("Days Accessed", "Reports Accessed")

newnames <- c(ach, repoNames, oth, ugrps2)

myData <- haven::read_dta("~/Desktop/sdpmplus/visualizations/dataVizData.dta") %>% 
			dplyr::select(rla1, mth1, sci1, hist1, write1, lang1, total1, rlagap1, mthgap1, scigap1, 
						  histgap1, writegap1, langgap1, totalgap1, ugroups, repo1, repo2, 
						  repo3, repo4, repo5, repo6, repo7, repo8, repo9, repo10, repo11, 
			  			  repo12, repo13, totdays, ovtotal, schnm) %>% 
			dplyr::mutate(ugroup1 = ifelse(ugroups == 1, 1, 0),
										 ugroup2 = ifelse(ugroups == 2, 1, 0), 
										 ugroup3 = ifelse(ugroups == 3, 1, 0), 
										 ugroup4 = ifelse(ugroups == 4, 1, 0), 
										 ugroup5 = ifelse(ugroups == 5, 1, 0)) %>%
			dplyr::group_by(schnm)  %>%
			dplyr::summarise(rla1 = mean(rla1, na.rm = TRUE), mth1 = mean(mth1, na.rm = TRUE), 
							 sci1 = mean(sci1, na.rm = TRUE), hist1 = mean(hist1, na.rm = TRUE), 
							 write1 = mean(write1, na.rm = TRUE), 
						lang1 = mean(lang1, na.rm = TRUE), 
						total1 = mean(total1, na.rm = TRUE), rlagap1 = mean(rlagap1, na.rm = TRUE), 
						mthgap1 = mean(mthgap1, na.rm = TRUE), scigap1 = mean(scigap1, na.rm = TRUE), 
						histgap1 = mean(histgap1, na.rm = TRUE), 
						writegap1 = mean(writegap1, na.rm = TRUE), 
						langgap1 = mean(langgap1, na.rm = TRUE), 
						totalgap1 = mean(totalgap1, na.rm = TRUE), 
						repo1 = mean(repo1, na.rm = TRUE), repo2 = mean(repo2, na.rm = TRUE), 
						repo3 = mean(repo3, na.rm = TRUE), repo4 = mean(repo4, na.rm = TRUE), 
						repo5 = mean(repo5, na.rm = TRUE), repo6 = mean(repo6, na.rm = TRUE), 
						repo7 = mean(repo7, na.rm = TRUE), repo8 = mean(repo8, na.rm = TRUE), 
						repo9 = mean(repo9, na.rm = TRUE), repo10 = mean(repo10, na.rm = TRUE), 
						repo11 = mean(repo11, na.rm = TRUE), repo12 = mean(repo12, na.rm = TRUE), 
						repo13 = mean(repo13, na.rm = TRUE), totdays = mean(totdays, na.rm = TRUE), 
						ovtotal = mean(ovtotal, na.rm = TRUE), ugroup1 = mean(ugroup1, na.rm = TRUE),
						ugroup2 = mean(ugroup2, na.rm = TRUE), ugroup3 = mean(ugroup3, na.rm = TRUE),
						ugroup4 = mean(ugroup4, na.rm = TRUE), ugroup5 = mean(ugroup5, na.rm = TRUE)) %>%
			as.data.frame()
myData$repo1 <- round((100 * myData$repo1), 2); myData$repo2 <- round((100 * myData$repo2), 2)
myData$repo3 <- round((100 * myData$repo3), 2); myData$repo4 <- round((100 * myData$repo4), 2)
myData$repo5 <- round((100 * myData$repo5), 2); myData$repo6 <- round((100 * myData$repo6), 2)
myData$repo7 <- round((100 * myData$repo7), 2); myData$repo8 <- round((100 * myData$repo8), 2)
myData$repo9 <- round((100 * myData$repo9), 2); myData$repo10 <- round((100 * myData$repo10), 2)
myData$repo11 <- round((100 * myData$repo11), 2); myData$repo12 <- round((100 * myData$repo12), 2)
myData$repo13 <- round((100 * myData$repo13), 2); myData$ugroup1 <- round((100 * myData$ugroup1), 2)
myData$ugroup2 <- round((100 * myData$ugroup2), 2); myData$ugroup3 <- round((100 * myData$ugroup3), 2)
myData$ugroup4 <- round((100 * myData$ugroup4), 2); myData$ugroup5 <- round((100 * myData$ugroup5), 2)

rownames(myData) <- myData[, 1]; myData <- myData[, -1]; colnames(myData) <- newnames
newHeat <- as.matrix.data.frame(myData, dimnames = list("row" = rownames(myData),
				"col" = newnames), byrow = TRUE)
schCor <- cor(newHeat, use = "pairwise.complete.obs", method = "pearson")
newHeat <- as.matrix.data.frame(myData, dimnames = list("row" = rownames(myData),
				"col" = newnames), byrow = TRUE)
schCor <- cor(newHeat, use = "pairwise.complete.obs", method = "pearson")

schViz <-  dplyr::select(dataViz, schnm, ugroups, session, repo1, repo2, repo3, repo4, 
			  			  repo5, repo6, repo7, repo8, repo9, repo10, repo11, 
			  			  repo12, repo13, func1, func2, func3, func4, func5, 
			  			  func6, eseduc, hseduc, mseduc) %>%
			dplyr::mutate(ugr1 = ifelse(dataViz$ugroups == 1, 1, 0),
						  ugr2 = ifelse(dataViz$ugroups == 2, 1, 0),
						  ugr3 = ifelse(dataViz$ugroups == 3, 1, 0),
						  ugr4 = ifelse(dataViz$ugroups == 4, 1, 0),
						  ugr5 = ifelse(dataViz$ugroups == 5, 1, 0),
						  sess1 = ifelse(dataViz$session == 1, 1, 0),
						  sess2 = ifelse(dataViz$session == 2, 1, 0),
						  sess3 = ifelse(dataViz$session == 3, 1, 0),
						  sess4 = ifelse(dataViz$session == 4, 1, 0),
						  sess5 = ifelse(dataViz$session == 5, 1, 0)) %>%
			dplyr::select(schnm, repo1, repo2, repo3, repo4, 
			  			  repo5, repo6, repo7, repo8, repo9, repo10, repo11, 
			  			  repo12, repo13, func1, func2, func3, func4, func5, 
			  			  func6, eseduc, hseduc, mseduc, ugr1, ugr2, ugr3, ugr4, ugr5,
						  sess1, sess2, sess3, sess4, sess5) %>%
			dplyr::group_by(schnm) %>% dplyr::summarise_each(dplyr::funs(tots = sum(., na.rm = TRUE))) %>%
	  as.data.frame(stringsAsFactors = FALSE)
rownames(schViz) <- schViz$schnm; schViz <- schViz[, -1]
colnames(schViz) <- c(repoNames, funcs, ugrps, ses)
schVizNames <- c(repoNames, funcs, ugrps, ses)
schViz <- as.matrix.data.frame(schViz, dimnames = list("row" = rownames(schViz),
				"col" = schVizNames), byrow = TRUE)

hm <- dplyr::group_by(dataViz, schnm) %>%
	  dplyr::select(repo1, repo2, repo3, repo4, repo5, repo6, repo7, 
					repo8, repo9, repo10, repo11, repo12, repo13) %>% 
					dplyr::summarise_each("sum") %>% dplyr::ungroup() %>%
	  as.data.frame(stringsAsFactors = FALSE)
rownames(hm) <- hm[, 1]; hm <- hm[, -1]
hm <- as.matrix.data.frame(x = hm, dimnames = list("row" = rownames(hm),
	 			"col" = repoNames), byrow = TRUE)

schgr <- dplyr::group_by(dataViz, schnm) %>%
	  dplyr::select(repo1, repo2, repo3, repo4, repo5, repo6, repo7, 
					repo8, repo9, repo10, repo11, repo12, repo13) %>% 
					dplyr::summarise_each("sum") %>% dplyr::ungroup() %>%
	  as.data.frame(stringsAsFactors = FALSE)
rownames(schgr) <- schgr[, 1]; schgr <- schgr[, -1]
colnames(schgr) <- repoNames
schgr <- as.matrix.data.frame(x = schgr, dimnames = list("row" = rownames(schgr),
	 			"col" = colnames(repoNames)), byrow = TRUE)

repdays <-  dplyr::group_by(dataViz, date, ugroups) %>% 
			dplyr::select(repo1, repo2, repo3, repo4, repo5, repo6, repo7, 
					repo8, repo9, repo10, repo11, repo12, repo13) %>% 
					dplyr::summarise_each("sum") %>% 
			na.omit() %>% reshape2::melt(id = c("date", "ugroups")) %>%
			reshape2::dcast(date + variable ~ ugroups, value.var = "value")

names(repdays) <- c("date", "report", "ugroup1", "ugroup2", "ugroup3", "ugroup4", "ugroup5")

userReports <- plyr::llply(as.list(unique(repdays$report)), .fun = function(v) {
			
	# Abbreviations for the user groups
	nms <- list("ugr1", "ugr2", "ugr3", "ugr4", "ugr5")
	
	# New variable names are combination of report name and 
	# Between users latent classes
	newNames <- plyr::llply(nms, .fun = function(z) {
		paste0(v, z)
	})
	
	# Create a data object w/only selected reports, remove NA values
	# from user group variables and substitute real zeros, 
	# drop the report type variable
	ndata <- dplyr::filter(repdays, report == v) %>%
	dplyr::mutate(ugroup1 = ifelse(is.na(ugroup1), 0, ugroup1),
				  ugroup2 = ifelse(is.na(ugroup2), 0, ugroup2),
				  ugroup3 = ifelse(is.na(ugroup3), 0, ugroup3),
				  ugroup4 = ifelse(is.na(ugroup4), 0, ugroup4),
				  ugroup5 = ifelse(is.na(ugroup5), 0, ugroup5)) %>%
    dplyr::select(-matches("report")) 
	
	ndata <- cbind(group1 = xts::xts(ndata$ugroup1, order.by = ndata$date),
				   group2 = xts::xts(ndata$ugroup2, order.by = ndata$date),
				   group3 = xts::xts(ndata$ugroup3, order.by = ndata$date),
				   group4 = xts::xts(ndata$ugroup4, order.by = ndata$date),
				   group5 = xts::xts(ndata$ugroup5, order.by = ndata$date))
	
	# Return the modified data object
	return(ndata)
	
})

ugr <- dplyr::group_by(dataViz, ugroups) %>%
	  dplyr::select(repo1, repo2, repo3, repo4, repo5, repo6, repo7, 
					repo8, repo9, repo10, repo11, repo12, repo13) %>% 
					dplyr::summarise_each("sum") %>% 
	  as.data.frame(stringsAsFactors = FALSE)
ugr <- na.omit(ugr); rownames(ugr) <- ugr[, 1]; ugr <- ugr[, -1]
ugr <- as.matrix.data.frame(x = ugr, dimnames = list("row" = rownames(ugr),
	 			"col" = repoNames), byrow = TRUE)

```


# Roadmap

--------------------------------------------------------

- **Motivation**
- **About Our Data**
- **Analytic Strategy**
	+ *Methods*
	+ *Study Design*
- **Results**
	+ *Overall Model Fit*
	+ *Data use across schools and relationship to accountability system results*
- **Lessons Learned** 
	+ *Implications for Building Leaders*
	+ *Implications for IT Leadership*
	+ *Implications for LEA Leadership*
- **Next Steps**
	+ *Mixed Methods Approaches*
	+ *Higher Resolution Replication*
	+ *How to do this in your organization (pending time available)*

<div class = "notes" id = "intro"> 
	
We'd also like to take a moment and ask you to estimate just how much data you create 
everytime you use analytic tools like data dashboards?  Once you have your estimate, 
write it down (we'll come back to it later) and see what the people sitting next to you thought. 

</div>

# Motivation 

## Why Metadata?
- Tyler & McNamara (2011) used system log files to measure educators' uptake of 
student data dashboards in Cleveland, OH.
- The data are generated in background processes and stored automatically on 
servers without regardless of whether or not we use it or want to analyze it.
- Metadata not only provide base measures of uptake, but can also provide a rich 
set of contextual and content variables that are well suited for data mining and 
machine learning applications.
- **What questions needed answers?**
- __*How are we evaluating data use, analytic capacity, and needs across the organization?*__
- __*Should we reinvest resources into existing data tools?*__
- What structures and systems support educators' and leaders' using data to improve outcomes for students?
- How can we use our human capital assets more strategically with regards to data analysis, usage, and incorporating data into decision making practices?
- Due to resource constraints, we were not able to fully address each of 
the questions.
	+ We focused on trying to answer the first two questions through our analyses.
	+ However, we used the last two questions to guide our recommendations for 
	moving the work forward and when considering the implications of the work 
	more broadly.
	
<div class = "notes" id = "speakers"> All </div>	
<div class = "notes" id = "Lisa"> 
One of the goals is to create tools and put them in the hands of folks on the 
frontlines.  Being able to monitor data use and show patterns can be a powerful 
tool to gain acceptance and recognition of importance of data use.
</div>
<div class = "notes" id = "Lu">
Started with focus on increasing data use and capacity in schools (and districts).  
Due to a combination of leadership and other changes, our focus needed to change 
and we had to adapt to figure out how to get things.
</div>
<div class = "notes" id = "Billy">
We knew the data existed and were trying to think about ways to quantify and 
classify how people interact with data.  After doing some exploratory data 
analysis we wanted to 
</div>


## Process at a glance {.smaller}
```{r, eval = TRUE, echo = FALSE, cache = FALSE, label = "flowchart"}
DiagrammeR::DiagrammeR("
sequenceDiagram;
   participant NWEA Data
   participant District Data
   participant Data Munging
   participant Data Staging
   participant EDA
   participant Data Analysis
   participant Report Results
   NWEA Data->>Data Munging: Clean NWEA Data w/Stata;
   Data Munging->>Data Staging: Use Elasticsearch CSV River for ingest;
   Data Staging->>EDA: Use Kibana for EDA;
   EDA->>NWEA Data: Updated data provided by vendor;
   NWEA Data->>Data Munging: Updated data cleaned w/Stata;
   District Data->>Data Munging: Clean district data w/Stata;
   Data Munging->>Data Staging: Joined Final NWEA and District Data;
   Data Munging->>Data Staging: Data ready for analysis;
   loop Models w/o Covariates
     Data Staging->>Data Analysis: Convert to Mplus;
     Data Staging->>Data Analysis: Define, Code, and Fit Model;
     Data Analysis->>Data Staging: Set OPTSEED to get parameter constraints;
     Data Staging->>Data Analysis: Refit model and save parameter estimates;
   end
   loop Models w/Covariates
     Data Analysis->>Data Staging: Use estimates from model w/o covariates;
     Data Staging->>Data Analysis: Use parameter estimates as constraints;
     Data Staging->>Data Analysis: Add between subject covariates;
   end
   Data Analysis->>Report Results: Interpret and Present Findings;
", width = 1000, height = 500)
```

<div class = "notes" id = "speakers"> Lu & Billy </div>	


# About Our Data

## Sample

- What data were used for our work?
	+ An Northwest Evaluation Association provided Fayette County Public Schools 
	with a CSV file they prepared from their system log files.
		- Although a nice gesture, the tools we were working with for exploratory 
		data analyses actually make it easier to work with the raw data.
	+ Each record included a user ID and a timestamp.
	+ We have a total of 36,000 user interaction/system logged records across 
	1,800 educators from November 2014 through May 2015.
	+ **__3,865 staff did not use the data system at all__**.
	+ The staff worked across 62 distinct schools/programs.
- How were the data used to classify/group users?
	+ First we classified how educators used the system (e.g., classifying the 
	sessions of usage/interactions or __*within users*__ classes)
	+ Then we classified the educators themselves (e.g., classifying the users 
	into groups or __*between users*__ classes)
	
<div class = "notes" id = "speakers"> Lisa </div>	
	
--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "jobreportCrossTab", message = FALSE, warning = FALSE}
library(magrittr)
tableNames <- names(attributes(dataViz$jobfunction)[["labels"]])
freqs <- table(dataViz$jobfunction) %>% as.data.frame(stringsAsFactors = FALSE) 
pcts <- round((100 * prop.table(table(dataViz$jobfunction))), 2) %>% 
		as.data.frame(stringsAsFactors = FALSE, responseName = "Percentage") 
jobtable <- dplyr::inner_join(freqs, pcts, by = "Var1") %>% dplyr::select(-Var1) 
DT::datatable(jobtable, rownames = tableNames, class = "hover striped", style = "default",
options = list(autoWidth = FALSE, pageLength = 7, pagingType = "simple",
lengthMenu = 7, searching = FALSE, filter = "none", selection = "none", 
columnDefs = list(list(className = "dt-center", targets = c(1:2)))), 
caption = "Distribution of Job Functions in System Log Data") 
```
		
<div class = "notes" id = "speakers"> Lisa & Lu </div>	
		
--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "reports", message = FALSE, warning = FALSE}
reportcatNames <- c("Non-User", names(attributes(dataViz$reportcat)[["labels"]]))
reportcatFreqs <- table(dataViz$reportcat) %>% as.data.frame(stringsAsFactors = FALSE) 
reportcatPcts <- round((100 * prop.table(table(dataViz$reportcat))), 2) %>% 
		as.data.frame(stringsAsFactors = FALSE, responseName = "Percentage") 
reports <- dplyr::inner_join(reportcatFreqs, reportcatPcts, by = "Var1") %>% dplyr::select(-Var1) 

DT::datatable(reports, rownames = reportcatNames, class = "hover striped", style = "default",
options = list(autoWidth = FALSE, pageLength = 14, pagingType = "simple",
lengthMenu = c(7, 14), searching = FALSE, filter = "none", selection = "none", 
columnDefs = list(list(className = "dt-center", targets = c(1:2)))), 
caption = "Distribution of Report Views in System Log Data") 
```

<div class = "notes" id = "speakers"> Lu  </div>	


## So, what do these groups of educators look like and how would you classify them? 
- How would you classify the users in your district?
	+ What metrics would you use to inform your classification?  
	+ How many types of users (e.g., groups) would you believe to exist *a priori*?
- What characteristics do you think the members of the groups would have in common?
	+ Would members of the same group typically view the same material?
	+ view reports at the same time?
	+ spend the same amount of time viewing reports?
	+ access the same number of reports on a daily or overall basis?
- Does it matter whether the behavior *causes* the groups, the groups *cause* the 
observed behavior, or some mixture of the two?
- Would you feel comfortable making all of these assumptions *a priori*?  **OR**
- Would you feel comfortable making an assumption along the lines of:
	+ Membership in a group/cluster *causes* the pattern of observed behaviors in the data.

<div class = "notes" id = "speakers"> Billy </div>	
	
--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "ASG Student Report", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[1]], main = "ASG Class Report") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Group 1") %>% 
	dygraphs::dySeries("group2", label = "Group 2") %>% 
	dygraphs::dySeries("group3", label = "Group 3") %>% 
	dygraphs::dySeries("group4", label = "Group 4") %>% 
	dygraphs::dySeries("group5", label = "Group 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```


--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Class By RIT", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[3]], main = "Class By RIT") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Group 1") %>% 
	dygraphs::dySeries("group2", label = "Group 2") %>% 
	dygraphs::dySeries("group3", label = "Group 3") %>% 
	dygraphs::dySeries("group4", label = "Group 4") %>% 
	dygraphs::dySeries("group5", label = "Group 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Class Reports", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[4]], main = "Class Reports") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Group 1") %>% 
	dygraphs::dySeries("group2", label = "Group 2") %>% 
	dygraphs::dySeries("group3", label = "Group 3") %>% 
	dygraphs::dySeries("group4", label = "Group 4") %>% 
	dygraphs::dySeries("group5", label = "Group 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Student Goal Setting Worksheet", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[11]], main = "Student Goal Setting Worksheet") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Group 1") %>% 
	dygraphs::dySeries("group2", label = "Group 2") %>% 
	dygraphs::dySeries("group3", label = "Group 3") %>% 
	dygraphs::dySeries("group4", label = "Group 4") %>% 
	dygraphs::dySeries("group5", label = "Group 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Student Progress Report", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[13]], main = "Student Progress Report") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Group 1") %>% 
	dygraphs::dySeries("group2", label = "Group 2") %>% 
	dygraphs::dySeries("group3", label = "Group 3") %>% 
	dygraphs::dySeries("group4", label = "Group 4") %>% 
	dygraphs::dySeries("group5", label = "Group 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

## Classifying users
- So far each of the user groups seem to have some type of behavior that clearly 
distinguishes them from other users (e.g., one group views a report type more than 
other groups - *on average* - over time).
- However, the reports viewed by the users isn't completely orthogonal.
	+ In otherwords, a single report isn't correlated with only a single group, 
	but is instead correlated with all of the groups to different degrees.
- If you wanted to see a better example of how a single report can be correlated 
with multiple groups in a way that isn't quite so easy to distinguish:
<div class = "notes" id = "speakers"> Lu & Billy </div>	

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Grade Reports", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[8]], main = "Grade Reports") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Group 1") %>% 
	dygraphs::dySeries("group2", label = "Group 2") %>% 
	dygraphs::dySeries("group3", label = "Group 3") %>% 
	dygraphs::dySeries("group4", label = "Group 4") %>% 
	dygraphs::dySeries("group5", label = "Group 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

## How does all of the data factor into the way we classify users?
- Visualizing multidimensional data can be very difficult and can be confusing 
to explain to diverse stakeholder groups.
	+ But, heatmaps can provide a high level of abstraction that we can relate to 
	familiar displays of data.  
	+ Imagine a crosstabulation where each row in the table represents a group of 
	users and each column represents some factor of interest (e.g., report types 
	viewed).
	+ Each cell would then show the amount of observations that are classified by 
	each row and column value (e.g., for a given group - or *row* - how many 
	times did they access a particular report - or *column*)
	
<div class = "notes" id = "speakers"> Billy </div>	
	
-------------------------------------------------------------------------------	

```{r, echo = FALSE, cache = FALSE, eval = TRUE, label = "ugroupByReport", message = FALSE, warning = FALSE, error = FALSE}
library(magrittr)

classViz <- haven::read_dta("~/Desktop/sdpmplus/visualizations/dataVizData.dta") %>% 
	dplyr::select(ugroups, repo1, repo2, repo3, repo4, 
			  			  repo5, repo6, repo7, repo8, repo9, repo10, repo11, 
			  			  repo12, repo13) %>%
	dplyr::group_by(ugroups) %>% dplyr::summarise_each("mean") %>% as.data.frame()
classViz <- classViz[c(1:5), ]
	# dplyr::select(mlcjoint, repo1, repo2, repo3, repo4, 
	#		  			  repo5, repo6, repo7, repo8, repo9, repo10, repo11, 
	#		  			  repo12, repo13, func1, func2, func3, func4, func5, 
	#		  			  func6, eseduc, hseduc, mseduc) %>%
	# dplyr::group_by(mlcjoint) %>% dplyr::summarise_each("mean") %>% as.data.frame()

repoNames <- c("ASG Class\n Report", "Admin\n Reports", "Class By\n RIT", 
			   "Class\n Report", "Class By\n Goal", "Class By\n Projected\n Proficiency", 
			   "District\n Summary", "Grade\n Reports", "MPG\n Reports", 
			   "Projected\n Proficiency\n Summary", 
			   "Student\n Goal\n Setting\n Worksheet", 
			   "Student\n Growth\n Summary", "Student\n Progress\n Report")

funcs <- c("Unknown", "Accounting/Clerical/Ops", "Information Tech/Systems", 
		   "District Administration/Central Office", "School Administration", 
		   "Special Ed/Ed Specialists", "ES Educator", "HS Educator", "MS Educator")

#labs <- c(repoNames, funcs)
labs <- repoNames
#rown <-	c("Between Cl 1 w/in Cl 1", "Between Cl 1 w/in Cl 2", "Between Cl 1 w/in Cl 3", 
#		  "Between Cl 1 w/in Cl 4", "Between Cl 1 w/in Cl 5", 
#		  "Between Cl 2 w/in Cl 1", "Between Cl 2 w/in Cl 2", "Between Cl 2 w/in Cl 3", 
#		  "Between Cl 2 w/in Cl 4", "Between Cl 2 w/in Cl 5", 
#		  "Between Cl 3 w/in Cl 1", "Between Cl 3 w/in Cl 2", "Between Cl 3 w/in Cl 3", 
#		  "Between Cl 3 w/in Cl 4", "Between Cl 3 w/in Cl 5", 
#		  "Between Cl 4 w/in Cl 1", "Between Cl 4 w/in Cl 2", "Between Cl 4 w/in Cl 3", 
#		  "Between Cl 4 w/in Cl 4", "Between Cl 4 w/in Cl 5", 
#		  "Between Cl 5 w/in Cl 1", "Between Cl 5 w/in Cl 2", "Between Cl 5 w/in Cl 3", 
#		  "Between Cl 5 w/in Cl 4", "Between Cl 5 w/in Cl 5", 
#		  "Not Classified")

rown <- c("Group # 1.1", "Group # 1.2", "Group # 1.3", "Group # 1.4", "Group # 1.5",
		  "Group # 2.1", "Group # 2.2", "Group # 2.3", "Group # 2.4", "Group # 2.5",
		  "Group # 3.1", "Group # 3.2", "Group # 3.3", "Group # 3.4", "Group # 3.5",
		  "Group # 4.1", "Group # 4.2", "Group # 4.3", "Group # 4.4", "Group # 4.5",
		  "Group # 5.1", "Group # 5.2", "Group # 5.3", "Group # 5.4", "Group # 5.5")

rown <- c("User Group 1", "User Group 2", "User Group 3", "User Group 4", "User Group 5")

rownames(classViz) <- rown; classViz <- classViz[, -1]; colnames(classViz) <- labs

classViz <- as.matrix.data.frame(round((100 * classViz), 2), dimnames = list("row" = rownames(classViz),
				"col" = colnames(classViz)), byrow = TRUE)

d3heatmap::d3heatmap(classViz, scale = "row", dendrogram = "both", na.rm = TRUE, k_row = 5, 
	k_col = 13, colors = "YlGnBu", na.omit = TRUE, yaxis_width = 175, xaxis_height = 0,
	xaxis_font_size = "10px", yaxis_font_size = "12px", labCol = colnames(classViz), labRow = rownames(classViz))
```

<div class = "notes" id = "results2"> 
	
 I see this as an opportunity for a bigger group discussion where we can 
engage the audience and in doing so model how they could potentially do something 
similar with educators and/or stakeholders in their areas as well.  So rather 
than us telling them what the groups are, providing some summary/descriptive 
statistics and asking them to define the groups for us. 
</div>


# Analytic Strategy

## Study Design

- Tools used:
	+ Elasticsearch, Kibana, and Logstash technology stack (the **ELK Stack**) 
	used for Exploratory Data Analysis
	+ Stata 14 MP8 used to clean and prep final data used for analyses
	+ Mplus input files and data source created with StatTransfer 13
	+ R used to automate fitting models in Mplus and to create slide deck
- We fitted 32 distinct *multi-level Latent Class* models using Mplus 7.3
	+ For each combination of:
		- Single vs Multi-level
		- Without Covariates vs With Covariates
		- All Staff vs Users Only
		- Two, Three, Four, and Five Latent Classes (this only varied between 
		users in the multi-level models)
- After fitting and testing our models, we also examined some correlations between 
school level accountability system results from the previous year and our results 
aggregated to the school level (e.g., number/proportions of user groups, report 
views, and/or job types at the school level)

<div class = "notes" id = "methods3"> 
	
Need to be able to talk about why/how the methods were aligned with the 
needs/requirements of the district. 
	
By this point I would assume we could have had several different people 
cycle through to use the R application (need to restart the application each 
time in order for it to generate a new user ID) which could help us display 
and describe how these processes could look for others 

This is an attempt at a 50,000 foot view of why these particular methods 
were brought to the data. 

Ideally, we would want to model the autoregressive relationship within each user session 
(e.g., the probability that the user views X report next conditional on the report they are 
currently viewing), within daily periods, within persons (e.g., a 3-level HLM) 

</div>

```{r, echo = FALSE, eval = FALSE, cache = FALSE}

c1 <- rep.int(c(2:5), 8)
c2 <- c(rep.int(c(rep.int("N", 4), rep.int("Y", 4)), 4))
usrs <- c(rep.int(c(rep.int("All Staff", 8), rep.int("Users Only", 8)), 2))
levs <- c(rep.int("Single Level", 16), rep.int("Two Level", 16))
design <- as.data.frame(cbind(c1, c2, usrs, levs), stringsAsFactors = FALSE)
names(design) <- c("# of Latent Classes", "Included Covariates", "Observations Used", "# of Hierarchical Levels")
library(DT)
datatable(design, rownames = FALSE, class = "hover striped", style = "default",
options = list(autoWidth = FALSE, pageLength = 8, pagingType = "simple",
lengthMenu = c(8), searching = FALSE, filter = "none", selection = "none", 
columnDefs = list(list(className = "dt-center", targets = c(1:3)))), 
caption = "Summary of Models Used in the Study Design") 

```


```{r, eval = FALSE, echo = FALSE, cache = FALSE}
rpos <- DiagrammeR::create_nodes(nodes = c("repo1", "repo2", "repo3", "repo4", "repo5", 
								"repo6", "repo7", "repo8", "repo9", "repo10", 
								"repo11", "repo12", "repo13"),
labels = FALSE, style = "filled", color = "#e41a1c", height = .25, width = .75,
tooltip = c("ASG Class Report", "Admin Reports", "Class by RIT", 
			"Class Reports", "Class by Goal", "Class by Projected Proficiency", 
			"District Summary", "Grade Report", "MPG Reports", 
			"Projected Proficiency Summary", "Student Goal Setting Worksheet", 
			"Student Growth Summary", "Student Progress Report"),
type = "upper", shape = "rectangle", fixedsize = FALSE, data = c(rep.int(10, 13)),
fontcolor = "#377eb8", fontsize = 14)

sessions <- DiagrammeR::create_nodes(nodes = c("session"), labels = FALSE,  width = 1, 
						 color = "#4daf4a", shape = "ellipse", height = .5,
						 tooltip = c("Within User Latent Classes"), 
						 type = "lower", style = "filled", fixedsize = FALSE,
						 fontcolor = "#984ea3", fontsize = 14)

ugroups <- DiagrammeR::create_nodes(nodes = "ugroups", labels = FALSE,  width = 1, 
						 color = "#ff7f00", shape = "ellipse", height = .5,
						 tooltip = c("Between Users Latent Classes"), 
						 type = "upper", style = "filled", fixedsize = FALSE,
						 fontcolor = "#ffff33", fontsize = 14)

covariates <- DiagrammeR::create_nodes(nodes = c("totdays", "eseduc", "hseduc", "mseduc"),
							labels = FALSE, style = "filled", color = "#a65628", 
							height = .35, width = .35, type = "upper", 
							tooltip = c("Total # Days Reports Accessed",
							"Elementary School Educator",
							"High School Educator", "Middle School Educator"),
							shape = "rectangle", data = c(rep.int(20, 4)),
							fixedsize = FALSE, fontcolor = "#f781bf", fontsize = 14)
						 

wthin <- DiagrammeR::create_edges(from = c(rep.int("session", 13)),
					 to = c("repo1", "repo2", "repo3", "repo4", "repo5", 
							"repo6", "repo7", "repo8", "repo9", "repo10", 
							"repo11", "repo12", "repo13"),
					 relationship = "requires", color = "black", labels = FALSE, tooltip = FALSE,
					 data = c(rep.int(10, 13)), penwidth = 1.25)
					 
btween <- DiagrammeR::create_edges(from = "ugroups", to = "session", labels = FALSE,  tooltip = FALSE,
						penwidth = 1.5, relationship = "requires", color = "black",
						data = 15)
						
btweenCov <- DiagrammeR::create_edges(from = c("totdays", "eseduc", "hseduc", "mseduc"), tooltip = FALSE,
						  to = c(rep.int("ugroups", 4)), labels = FALSE, penwidth = 1.5,
						  relationship = "requires", color = "black",
						  data = c(15, 15, 15, 15))

						  
nodes <- DiagrammeR::combine_nodes(rpos, ugroups, sessions, covariates)
edges <- DiagrammeR::combine_edges(wthin, btween, btweenCov)				
x <- DiagrammeR::create_graph(nodes_df = nodes, edges_df = edges)
DiagrammeR::render_graph(x, height = 600) 
```

## Methods 
- Potential alternatives to our approach:
	+ Broadly, what we were doing was *clustering* the data - or using the data 
	to identify groups where patterns were more similar to each other (e.g., 
	within group) than they were to others (e.g., between groups).
	+ Clustering algorithms (e.g., K-Means/Medians, Hierarchical Agglomerative 
	Clustering, Dendrograms, etc...) are built around assumptions that the data 
	are randomly sampled from the population of interest. 
	+ Clustering algorithms also make no assumptions about the underlying 
	structure/nature leading to the observed data points (e.g., the clusters 
	could cause the groups, the groups could cause the clusters, or they could 
	just be correlated).
- What is Latent Class Analysis (LCA) and how is it different?
	+ LCA like other latent variable models is derived from a set of *causal* 
	assumptions; more specifically, we assume that the data we are able to 
	observe (e.g., viewing NWEA report types) is *caused* by some underlying 
	variable that cannot be directly measured.
	+ Unlike clustering algorithms, LCA is a method that is both robust enough 
	to deal with the repeated-measures nature of our data, and flexible enough 
	to allow us to specify the relationships between the observed and latent 
	variables.
	+ Unlike other latent variable models, LCA does not assume that the latent 
	variable is continuous and $N(\mu,\sigma)$ distributed, but instead allows 
	us to estimate a nominal scale variable identifying a set of 
	*mutually exclusive and completely exhaustive* groups - or classes.

## LCA and Covariates 

- One of the challenges with LCA is how covariates are allowed to enter the 
model and whether or not the covariates define class membership or not.
	+ You can think of the approach used in LCA as fairly analogous to the way 
	IRT methods are applied to test data to estimate a scaled score.
	+ We wouldn't want student demographics to *define* the scaled scores, so the 
	measurement model - IRT in the case of test data - is fitted to the data 
	without any covariates in the model.
	+ Once those values are predicted, we can test how well demographic 
	characteristics predict the test scores.
- In our case, we fitted the LCA model to the data, used the estimated 
coefficients as parameter constraints (e.g., to hold the measurement model 
constant), and then added covariates to see how well they predicted class membership.
	+ Henry and Muthén (2010) suggest "Once a multilevel latent class 
	structure is specified, covariates can be introduced at both Level 1 and 
	Level 2." (p. 202)
	+ Vermunt (2010) and Gudicha and Vermunt (2013) also found evidence that the 
	manner in which covariates are introduced to the model can have substantial 
	effects on the quality and correctness of the classification.




<!-- ## Data Use and Academic Indicators

- Our goal in this area of research was not to identify causal factors or 
hypothesis testing of any specific parameters within the models, but rather to 
use the different models to see under which assumptions any detectable 
correlations would hold to provide a framework for replication and future research.
-->

## How are school staff interacting with the data system overall? 

```{r, echo = FALSE, cache = FALSE, eval = TRUE, label = "schByReport", message = FALSE, warning = FALSE}
d3heatmap::d3heatmap(schgr, scale = "col", dendrogram = "both", na.rm = TRUE, k_row = 62, 
	k_col = 13, colors = "BuPu", na.omit = TRUE, brush_color = "#000000",
	xaxis_font_size = "10px", yaxis_font_size = "5px", labCol = colnames(schgr), labRow = rownames(schgr))
```

<div class = "notes" id = "speakers"> All </div>	


# Results 

## Overall Model Fit 

- Sophisticated statistical modeling are attractive to analytic staff, but is 
there any indication that the methods are appropriate for the data?
	+ Single-level models fail to retrieve good estimates when the heterogeneity 
	exists at both the first and second heirarchical levels and our results are 
	consistent with the existing literature on the topic (Muthén & Asparouhov, 2009)  
- With limited exception, we see marginal gains in fitting the model after adjusting for educator covariates that do not predict class membership, but seem to reduce error variance.
	+ These findings are consistent with the known properties of the estimators 
	discussed in Lubke and Muthén (2007).
	+ **We retained the last model in the table on the next slide based on existing literature on 
	model fit selection critierion [(Muthén, 2011)](http://www.statmodel.com/discussion/messages/13/6671.html?1432999150)**
- Results for the parameters that were not of primary interest are suppressed, 
but available upon request.
- Results for the parameters of interest provide varying degrees of support for 
our intuition:
	+ Both the total number of days accessed and the indicator for elementary 
	educators displayed a strong correlation with some of the between user classes.  

<div class = "notes" id = "speakers"> Billy </div>	


## Identifying the best fitting model 
  
  
```{r, echo = FALSE, eval = TRUE, label = "modset1", cache = FALSE} 
library(DT)
datatable(allMods, rownames = FALSE, class = "hover striped", style = "default",
options = list(autoWidth = FALSE, pageLength = 16, pagingType = "simple",
lengthMenu = c(4, 8, 12, 16), searching = FALSE, filter = "none", selection = "none", 
columnDefs = list(list(className = "dt-center", targets = c(1:6)))), 
caption = "Latent Class Analysis Model Fit Summaries") 
```

<div class = "notes" id = "speakers"> Billy </div>	


-------------------------------------------------------------------------------

- What patterns do we observe between prior years' accountability system results, the distribution of staff members 
classified by user groups, and the proportion of reports viewed by school data users?

```{r, echo = FALSE, cache = FALSE, eval = TRUE, label = "acctSchGroupReport", message = FALSE, warning = FALSE,  fig.cap = "2014 Accountability, User Groups, and Report Access by School"}
# School level raw results
# Need to make reports and job types percentages
d3heatmap::d3heatmap(myData, scale = "col", dendrogram = "both", na.rm = TRUE, k_row = 34, 
	k_col = 34, colors = "RdYlBu", na.omit = TRUE,
	xaxis_font_size = "8px", yaxis_font_size = "5px", labCol = colnames(myData), labRow = rownames(myData))
```

<div class = "notes" id = "speakers"> Billy & Lisa </div>	


## Are the Latent Classes invariant across user characteristics?
- Could job type and/or total number of days the user accessed the system 
significantly predict how the users were classified?  
	+ Is it better to have a classification model that is dependent or independent 
	of those characteristics?
	
<div class = "notes" id = "speakers"> Billy </div>	

```{r, echo = FALSE, eval = TRUE, label = "modparm1of2", cache = FALSE}
library(DT)
datatable(modelParams, rownames = FALSE, class = "hover striped", style = "default",
options = list(autoWidth = FALSE, pageLength = 10, pagingType = "simple",
lengthMenu = c(5, 10, 15, 20), searching = FALSE, filter = "none", selection = "none", 
columnDefs = list(list(className = "dt-center", targets = c(1:5)))), 
caption = "User-Level Covariates and Latent Class Probabilities") 
```


## What do the correlations between prior years' accountability system results, the distribution of staff members classified by user groups, and the proportion of reports viewed by school data users look like?

```{r, echo = FALSE, cache = FALSE, eval = TRUE, label = "corrAcctSchGroupReport", message = FALSE, warning = FALSE,  fig.cap = "Correlation of Accountability System Results, Proportion of Staff by User Groups, and Proportion of Report Views"}
# School level raw results
d3heatmap::d3heatmap(schCor, scale = "col", dendrogram = "both", na.rm = TRUE, k_row = 34, 
	k_col = 34, colors = "PuOr", na.omit = TRUE,
	xaxis_font_size = "8px", yaxis_font_size = "8px", labCol = colnames(schCor), labRow = rownames(schCor))
```

<div class = "notes" id = "speakers"> Billy </div>	


# Lessons Learned 

## Implications for Building Leaders

- **How are we evaluating data use, analytic capacity, and needs across the organization?**
	+ We saw that across these distinct user groups there is limited overlap in 
	the data they tend to use.  
	+ If our intent is to develop more robust site-based teams of data users and 
	expertise, building leaders should consider building educator teams in such 
	a way as to maximize the different user types within teams (e.g., have a team 
	of 5 educators with each of these characteristics).
- **Should we reinvest resources into existing data tools?**
	+ Data use, expertise, and comfort clearly varies across school sites.  
	+ If the only end users working with the system are already those who are 
	tech savvy, it may be worthy to discuss options that are more inviting and 
	accessable to a wider set of users.
	+ If the building staff generally feel comfortable accessing the system, it 
	would be better to consider advocating for additional and more in-depth 
	training.

<div class = "notes" id = "speakers"> Lu </div>	

## Implications for IT Leadership

- **How are we evaluating data use, analytic capacity, and needs across the organization?**
	+ *IT/IS Teams cannot provide customer service without knowing the customer.*
	+ Although IT/IS staff may be less likely to interact with end-users on a 
	regular basis, using tools like the ELK Stack can provide them with an 
	easy to maintain system to collect, clean, and store data they can use to 
	identify deficiencies and strengths of the system.
	+ Most importantly, however, is that these data are immediately actionable 
	in decision-making processes affecting development and investment choices.
- **Should we reinvest resources into existing data tools?**
	+ If we had observed stable and long time lapses between reports being viewed 
	it could indicate system performance issues.  
	+ If the tool does not prioritize the user experience, we should not expect the 
	users to prioritize the tool.  In otherwords, if the platform is unresponsive, 
	sluggish, and generally does not provide a good user experience, we should 
	likely look for an alternative solution.
	+ Consider insourcing vs outsourcing curves when determining how to move 
	forward in the best way for the district.

<div class = "notes" id = "speakers"> Billy </div>	


## Implications for LEA Leadership

- **How are we evaluating data use, analytic capacity, and needs across the organization?**
	+ Monitoring and analyzing usage is an efficient way to begin understanding 
	both if, how, and what data use positively affects student outcomes.  
	+ Tools that can automate the collection, cleaning, and storage process can 
	save the organization significant resources (particularly the time that 
	analytic staff would otherwise spend cleaning and parsing data).
	+ However, organizations should make a concerted effort to go beyond solely 
	quantitative measures and be deliberate in collecting qualitative data to 
	provide context to the interpretation of the results.  
- **Should we reinvest resources into existing data tools?**
	+ At a broader level, we should have a better understanding of how the data 
	use affects student outcomes in order to have a reasonable cost/benefit 
	analysis to drive the decision.
	+ Barring that, we really need to know more about why some educators do or 
	do not use the data system. 
	+ If the reason for the lack of uptake is training, it could be more effective 
	to invest in additional support and training.  
	+ If the reason for the lack of uptake is users' negative experiences with 
	the system, we may want to consider investing in either new software platforms 
	and/or hardware upgrades to improve the user experience.

<div class = "notes" id = "speakers"> Lisa </div>	

# Next Steps & Future Directions 

## 
- We found some correlations between data use and the prior year's accountability 
system results, but data were not available for the current year.  
	+ Higher scores on the KY State Accountability System Science Gap 
	metric were positively correlated with the number of days users accessed 
	the data systems and the number of reports accessed; there were also small/weak 
	correlations with higher Science Gap accountability scores and the proportion of 
	group 1 and group 2 users.
	+ There were positive correlations between the proportion of group 2 users and 
	KY's accountability system scores.
	+ The correlations between the proportion of different user types and the prior 
	year's accountability system results varies in size and magnitude across both 
	user types and accountability system metrics.
	
<div class = "notes" id = "speakers"> Lisa & Billy </div>	

## Mixed Methods Approaches
- We cannot overstate the importance of including robust qualitative research 
along side the quantative research in this area.
	+ We are attempting to capture characteristics of people that are directly 
	measurable without having a widely accepted definition *a priori*.
	+ Using qualitative data can provide the much needed context in which the 
	quantiative results should be interpretted and considered.
- There are several different strategies we feel are viable implementation 
candidates:
	+ Use a combination of survey, interview, and/or focus groups with users to 
	better understand their interactions with the system. 
	+ Use a Master observer model to *score* and classify user sessions; these 
	data could then be used as a training set for machine learning algorithms to 
	automate the processes in the future.

<div class = "notes" id = "speakers"> Lu </div>	


## Higher Resolution Replication

- We couldn't model the exact relationship we wanted given the time.
	+ We don't believe that it is just a matter of the reports an individual 
	views independent of time, and believe modeling the use path (e.g., the 
	conditional probability of viewing a given report next) would be more 
	informative.
	+ Modeling use paths could also be used to develop recommender systems that 
	would act as immediate intervention systems (e.g., providing recommendations 
	for which report to view next) to users that may be struggling with the system.
- Estimate relationships between data access/usage of classroom educators and 
interim/benchmark performance measures.  
	+ Focus on the process of data use (e.g., specific pathways in which educators 
	interact with the data systems) and how those distinct pathways affect student 
	outcomes.

<div class = "notes" id = "speakers"> Billy </div>	

# Extras

## How to do this in your organization (pending time available)
- A quick start style installer is available at : [Installation Script](https://github.com/wbuchanan/elkStackInstaller)
- When our group met yesterday, we asked Lisa to install things on my computer.  So...Lisa...how hard was it to install 
all of the software?

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Admin Reports", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[2]], main = "Admin Reports") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Class by Goal", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[5]], main = "Class by Goal") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Class by Projected Proficiency", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[6]], main = "Class by Projected Proficiency") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "District Summary", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[7]], main = "District Summary") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

```{r, eval = TRUE, echo = FALSE, label = "MPG Reports", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[9]], main = "MPG Reports") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Projected Proficiency Summary", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[10]], main = "Projected Proficiency Summary") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```

--------------------------------------------------------

```{r, eval = TRUE, echo = FALSE, label = "Student Growth Summary", fig.height = 6, fig.width = 9}
	dygraphs::dygraph(userReports[[12]], main = "Student Growth Summary") %>% 
	dygraphs::dyAxis("x", drawGrid = FALSE) %>% 
	dygraphs::dyAxis("y", drawGrid = FALSE, label = "# of Reports Viewed") %>% 
	dygraphs::dyRangeSelector() %>% 
	dygraphs::dyOptions(colors = RColorBrewer::brewer.pal(5, "Set1")) %>% 
	dygraphs::dySeries("group1", label = "Class 1") %>% 
	dygraphs::dySeries("group2", label = "Class 2") %>% 
	dygraphs::dySeries("group3", label = "Class 3") %>% 
	dygraphs::dySeries("group4", label = "Class 4") %>% 
	dygraphs::dySeries("group5", label = "Class 5") %>%
	dygraphs::dyLegend(width = 600) %>%
	dygraphs::dyHighlight(highlightCircleSize = 8, highlightSeriesBackgroundAlpha = .75, 
						  highlightSeriesOpts = list(strokeWidth = 3))
```


